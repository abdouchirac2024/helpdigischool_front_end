@startuml HelpDigiSchool_v3_Final_Expert
!pragma layout smetana
scale 1.5
skinparam dpi 200
skinparam classAttributeIconSize 0
skinparam nodesep 100
skinparam ranksep 120
skinparam padding 10
skinparam backgroundColor #FEFEFE
skinparam packageStyle rectangle
skinparam shadowing false
skinparam defaultFontSize 12
skinparam defaultFontName Arial
skinparam wrapWidth 250
skinparam maxMessageSize 150
skinparam class {
  BackgroundColor White
  BorderColor #333333
  BorderThickness 2
  ArrowColor #555555
  FontSize 12
  FontName Arial
  FontStyle bold
  AttributeFontSize 11
  StereotypeFontSize 10
}
skinparam package {
  BorderColor #444444
  BorderThickness 2
  BackgroundColor #F8F8F8
  FontSize 14
  FontStyle bold
}
skinparam enum {
  BackgroundColor #FFF9C4
  BorderColor #F57F17
  FontSize 11
}
skinparam note {
  BackgroundColor #FFF9E6
  BorderColor #E6B800
  FontSize 11
}

title HelpDigiSchool - Diagramme de Classes UML v3.0\nArchitecture Multi-Tenant SaaS - Sans Redondances\n√âcoles Maternelles et Primaires - Cameroun\n\nProduction Ready - Expert Design

legend top left
  |= Symbole |= Signification |= Usage |
  | **‚óÜ‚îÄ‚îÄ‚îÄ‚îÄ** | Composition forte | Cycle de vie d√©pendant |
  | **‚óá‚îÄ‚îÄ‚îÄ‚îÄ** | Agr√©gation faible | Contenance sans propri√©t√© exclusive |
  | **‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ** | Association simple | Relation bidirectionnelle |
  | **‚óÅ‚îÄ‚îÄ‚îÄ‚îÄ** | H√©ritage | G√©n√©ralisation/Sp√©cialisation |
  | **<<enum>>** | √ânum√©ration | Type avec valeurs fixes |
  | **<<vo>>** | Value Object | Objet immuable sans identit√© propre |
endlegend

' ========================================
' PACKAGE 1: GESTION PLATEFORME
' ========================================
package "üì¶ Gestion Plateforme (Multi-Tenancy)" as PlatformPkg #E8F4F8 {

  enum TypeSecteur <<enum>> {
    PRIVE
    PUBLIC
  }

  enum TypeEnseignement <<enum>> {
    MATERNELLE
    PRIMAIRE
    SECONDAIRE_1ER_CYCLE
    SECONDAIRE_2EME_CYCLE
    SUPERIEUR
  }

  class Region {
    +id: UUID {PK}
    +nom: String {NotNull, Unique}
    +code: String {NotNull, Unique, Size(2-5)}
    +paysCode: String {Default='CM'}
    +ordreAffichage: Integer
  }

  class Departement {
    +id: UUID {PK}
    +regionId: UUID {FK, NotNull}
    +nom: String {NotNull}
    +code: String {NotNull, Unique}
    +chefLieu: String
  }

  class Tenant {
    +id: UUID {PK}
    +tenantId: String {Unique, NotNull, Index}
    +nomEcole: String {NotNull, Size(3-200)}
    +codeEcole: String {Unique, NotNull, Size(4-20)}
    +sousDomaine: String {Unique, NotNull, Pattern(DNS)}
    +typeSecteur: TypeSecteur {NotNull}
    +statut: StatutTenant {NotNull, Default=EN_ATTENTE}
    +forfaitAbonnementId: UUID {FK}
    +adresseId: UUID {FK, NotNull}
    +emailContact: String {Email, NotNull}
    +telephoneContact: String {Phone, NotNull}
    +telephoneSecondaire: String {Phone}
    +nombreElevesEstime: Integer {Min=1}
    +nombreElevesActuels: Integer {Default=0}
    +logoUrl: String {URL}
    +siteWeb: String {URL}
    +dateCreation: DateTime {NotNull, Default=NOW}
    +dateExpiration: DateTime {NotNull}
    +estActif: Boolean {NotNull, Default=true}
    +dernierPaiement: DateTime
    
    +activer(): void
    +suspendre(motif: String): void
    +verifierAbonnement(): Boolean
    +obtenirTypesEnseignement(): List<TypeEnseignement>
    +calculerTauxOccupation(): Decimal
    +estDansLimites(): Boolean
  }

  class TenantTypeEnseignement {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull}
    +typeEnseignement: TypeEnseignement {NotNull}
    +dateDebut: Date {NotNull}
    +dateFin: Date
    +estActif: Boolean {NotNull, Default=true}
  }

  enum StatutTenant <<enum>> {
    EN_ATTENTE_VERIFICATION
    VALIDE_EN_ATTENTE_FORFAIT
    ACTIF
    SUSPENDU
    EXPIRE
    REJETE
  }

  class ForfaitAbonnement {
    +id: UUID {PK}
    +nom: String {NotNull, Unique}
    +description: String
    +prix: Decimal {NotNull, Min=0}
    +devise: String {NotNull, Default='XAF'}
    +periodeFacturation: String {NotNull}
    +maxEleves: Integer
    +maxEnseignants: Integer
    +maxClasses: Integer
    +stockageGo: Integer {Default=10}
    +smsParMois: Integer {Default=0}
    +fonctionnalites: JSON
    +estActif: Boolean {NotNull, Default=true}
    +ordreAffichage: Integer
    
    +calculerPrixPeriode(periode: String): Decimal
    +verifierLimites(nbEleves: Integer, nbEnseignants: Integer): Boolean
    +aFonctionnalite(nom: String): Boolean
  }

  class Paiement {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +forfaitAbonnementId: UUID {FK, NotNull}
    +montant: Decimal {NotNull, Min=0}
    +devise: String {NotNull, Default='XAF'}
    +methodePaiement: String {NotNull}
    +operateurMobileMoney: String
    +numeroTelephone: String {Phone}
    +idTransaction: String {Unique}
    +numeroReference: String {Unique}
    +statut: StatutPaiement {NotNull, Default=EN_ATTENTE}
    +datePaiement: DateTime
    +dateValidation: DateTime
    +payePar: UUID {FK}
    +validepar: UUID {FK}
    +raisonEchec: String
    +nombreTentatives: Integer {Default=0}
    
    +traiterPaiement(): Boolean
    +genererFacture(): Facture
    +annuler(): void
    +verifierStatut(): StatutPaiement
  }

  enum StatutPaiement <<enum>> {
    EN_ATTENTE
    EN_COURS
    COMPLETE
    ECHOUE
    REMBOURSE
    ANNULE
  }

  class Facture {
    +id: UUID {PK}
    +numeroFacture: String {Unique, NotNull}
    +tenantId: UUID {FK, NotNull, Index}
    +paiementId: UUID {FK, NotNull}
    +montantHT: Decimal {NotNull}
    +montantTVA: Decimal {Default=0}
    +tauxTVA: Decimal {Default=19.25}
    +montantTTC: Decimal {NotNull}
    +dateEmission: DateTime {NotNull, Default=NOW}
    +dateEcheance: DateTime
    +datePaiement: DateTime
    +statut: String {NotNull, Default='EMISE'}
    +urlPdf: String {URL}
    +emailEnvoi: String {Email}
    +dateEnvoi: DateTime
    
    +genererPDF(): String
    +marquerPayee(): void
    +envoyer(): void
    +telecharger(): ByteArray
  }

  ' Relations Plateforme
  Region "1" *-- "1..*" Departement : contient >
  Tenant "0..*" -- "1" Departement : situ√© dans >
  Tenant "1" *-- "1..*" TenantTypeEnseignement : propose >
  TenantTypeEnseignement "0..*" -- "1" TypeEnseignement
  Tenant "0..*" -- "1" ForfaitAbonnement : souscrit >
  Tenant "1" *-- "0..*" Paiement : effectue >
  Paiement "0..*" -- "1" ForfaitAbonnement : pour >
  Paiement "1" -- "1" Facture : g√©n√®re >
}

' ========================================
' PACKAGE 2: LOCALISATION (Value Objects)
' ========================================
package "üìç Localisation & Adresses" as LocationPkg #F0F8E8 {

  class Adresse <<vo>> {
    +id: UUID {PK}
    +ligneAdresse1: String {NotNull, Size(1-200)}
    +ligneAdresse2: String {Size(0-200)}
    +quartier: String {Size(1-100)}
    +villeNom: String {NotNull, Size(1-100)}
    +departementId: UUID {FK, NotNull}
    +codePostal: String {Size(5-10)}
    +boitePostale: String
    +pays: String {NotNull, Default='Cameroun'}
    +latitude: Double {Range(-90,90)}
    +longitude: Double {Range(-180,180)}
    +precision: Integer
    +typeAdresse: TypeAdresse {NotNull}
    +estPrincipale: Boolean {Default=false}
    +estValidee: Boolean {Default=false}
    +dateCreation: DateTime {Default=NOW}
    +dateValidation: DateTime
    
    +formaterComplete(): String
    +calculerDistance(autre: Adresse): Decimal
    +estDansRayon(lat: Double, lon: Double, rayonKm: Decimal): Boolean
    +obtenirCoordonnees(): Point
    +valider(): void
  }

  enum TypeAdresse <<enum>> {
    DOMICILE
    TRAVAIL
    ETABLISSEMENT
    AUTRE
  }

  ' Relations Localisation
  Adresse "0..*" -- "1" Departement : dans >
  Tenant "1" -- "1" Adresse : situ√©e √† >
}

' ========================================
' PACKAGE 3: GESTION UTILISATEURS
' ========================================
package "üë• Gestion Utilisateurs (RBAC)" as UserPkg #FFE8E8 {

  abstract class Utilisateur <<abstract>> {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +nomUtilisateur: String {Unique, NotNull, Size(3-50)}
    +email: String {Email, Unique, NotNull}
    +motDePasse: String {Hashed, NotNull}
    +nom: String {NotNull, Size(1-100)}
    +prenom: String {NotNull, Size(1-100)}
    +telephone: String {Phone, NotNull}
    +telephoneSecondaire: String {Phone}
    +role: RoleUtilisateur {NotNull}
    +estActif: Boolean {NotNull, Default=true}
    +estVerifie: Boolean {Default=false}
    +derniereConnexion: DateTime
    +dateCreation: DateTime {NotNull, Default=NOW}
    +dateModification: DateTime
    +photoProfil: String {URL}
    +langue: String {Default='fr', Size(2)}
    +tokenReinitialisation: String
    +dateExpirationToken: DateTime
    
    +{abstract} authentifier(password: String): Boolean
    +changerMotDePasse(ancien: String, nouveau: String): Boolean
    +mettreAJourProfil(data: Map): void
    +desactiver(): void
    +activer(): void
    +nomComplet(): String
    +reinitialiserMotDePasse(): String
  }

  enum RoleUtilisateur <<enum>> {
    SUPER_ADMIN
    ADMIN_ECOLE
    ENSEIGNANT
    ELEVE
    PARENT
    SECRETAIRE
    COMPTABLE
    AGENT_TRANSPORT
    BIBLIOTHECAIRE
  }

  class AdminEcole {
    +matriculeEmploye: String {Unique, NotNull}
    +departement: String {NotNull}
    +fonction: String
    +dateEmbauche: Date {NotNull}
    +dateFinContrat: Date
    +typeContrat: String
    +salaire: Decimal
    
    +gererUtilisateurs(): void
    +genererRapports(): List<Rapport>
    +configurerEcole(): void
    +validerInscriptions(): void
    +approuverPaiements(): void
  }

  class Enseignant {
    +matriculeEmploye: String {Unique, NotNull}
    +numeroMatricule: String {Unique}
    +specialisation: String
    +diplome: String
    +niveauEtudes: String
    +dateEmbauche: Date {NotNull}
    +dateFinContrat: Date
    +salaire: Decimal
    +statut: String {NotNull, Default='ACTIF'}
    +typeContrat: String
    +numeroSecuriteSociale: String
    
    +saisirNotes(evaluation: Evaluation): void
    +faireAppel(cours: Cours, date: Date): void
    +obtenirChargeHoraire(): Integer
    +redigerAppreciation(bulletin: Bulletin): void
    +consulterEmploiDuTemps(): List<EmploiDuTemps>
    +obtenirClasses(): List<Classe>
  }

  enum Genre <<enum>> {
    MASCULIN
    FEMININ
  }

  class Eleve {
    +matricule: String {Unique, NotNull, Pattern}
    +dateNaissance: Date {NotNull, Past}
    +lieuNaissanceVille: String {NotNull}
    +lieuNaissancePays: String {NotNull, Default='Cameroun'}
    +genre: Genre {NotNull}
    +nationalite: String {NotNull, Default='Camerounaise'}
    +adresseId: UUID {FK}
    +infosMedicales: String {Encrypted}
    +groupeSanguin: String {Pattern}
    +allergies: String
    +handicaps: String
    +traitementsMedicaux: String {Encrypted}
    +contactUrgenceNom: String {NotNull}
    +contactUrgenceTelephone: String {Phone, NotNull}
    +nomPere: String
    +telephonePere: String {Phone}
    +professionPere: String
    +emailPere: String {Email}
    +nomMere: String
    +telephoneMere: String {Phone}
    +professionMere: String
    +emailMere: String {Email}
    +nomTuteur: String
    +telephoneTuteur: String {Phone}
    +lienTuteur: String
    +dateInscription: Date {NotNull}
    +anneePremiereinscription: String
    +statut: StatutEleve {NotNull, Default=INSCRIT}
    +photoIdentite: String {URL}
    +extraitNaissance: String {URL, NotNull}
    +certificatMedical: String {URL}
    +ficheRenseignement: String {URL}
    
    +age(): Integer
    +inscrire(classe: Classe): void
    +transferer(nouvelleClasse: Classe): void
    +estAJourScolarite(): Boolean
    +obtenirParents(): List<Parent>
    +obtenirAdresseComplete(): String
    +estDansQuartier(quartier: String): Boolean
    +calculerMoyenneGenerale(periode: Periode): Decimal
  }

  enum StatutEleve <<enum>> {
    INSCRIT
    ACTIF
    SUSPENDU
    TRANSFERE
    DIPLOME
    ABANDONNE
    RADIE
    EXCLU
  }

  class Parent {
    +profession: String {Size(1-200)}
    +employeur: String
    +adresseId: UUID {FK}
    +situationMatrimoniale: String
    +revenuMensuel: Decimal
    +nombreEnfants: Integer {Default=0}
    
    +consulterBulletin(eleve: Eleve, periode: Periode): Bulletin
    +effectuerPaiement(frais: FraisEleve): Transaction
    +envoyerMessage(destinataire: Utilisateur, contenu: String): Message
    +consulterPresences(eleve: Eleve, dateDebut: Date, dateFin: Date): List<PresenceEleve>
    +obtenirEnfants(): List<Eleve>
    +obtenirAdresses(): List<Adresse>
    +ajouterAdresse(adresse: Adresse, estPrincipale: Boolean): void
  }

  class Secretaire {
    +matriculeEmploye: String {Unique, NotNull}
    +departement: String
    +dateEmbauche: Date
    +fonction: String
    
    +enregistrerInscription(eleve: Eleve): void
    +genererCertificat(eleve: Eleve, type: String): Document
    +gererScolarite(): void
    +imprimerBulletins(classe: Classe, periode: Periode): void
  }

  class Comptable {
    +matriculeEmploye: String {Unique, NotNull}
    +numeroAgrement: String
    +dateEmbauche: Date
    +specialisation: String
    
    +validerPaiement(transaction: Transaction): void
    +genererBilanFinancier(dateDebut: Date, dateFin: Date): Rapport
    +suivreRecouvrement(): List<FraisEleve>
    +genererEtatFinancier(periode: Periode): Document
    +exporterComptabilite(): ByteArray
  }

  class AgentTransport {
    +matriculeEmploye: String {Unique, NotNull}
    +numeroPermis: String {NotNull}
    +typePermis: String {NotNull}
    +dateObtentionPermis: Date
    +dateExpirationPermis: Date {Future}
    +busAffecteId: UUID {FK}
    +dateAffectation: Date
    
    +pointeEleve(eleve: Eleve, trajet: Trajet): void
    +suivreTrajet(trajet: Trajet): void
    +signalerIncident(description: String): Incident
    +commencerTrajet(): void
    +terminerTrajet(): void
  }

  class Bibliothecaire {
    +matriculeEmploye: String {Unique, NotNull}
    +dateEmbauche: Date
    +specialisation: String
    
    +enregistrerPret(livre: Livre, eleve: Eleve): PretLivre
    +enregistrerRetour(pret: PretLivre): void
    +suivreRetards(): List<PretLivre>
    +gererStock(): void
    +genererStatistiques(): Rapport
  }

  class EleveParent {
    +id: UUID {PK}
    +eleveId: UUID {FK, NotNull}
    +parentId: UUID {FK, NotNull}
    +lienParente: String {NotNull}
    +estContactPrincipal: Boolean {Default=false}
    +estTuteurLegal: Boolean {Default=false}
    +autorisationRecuperation: Boolean {Default=true}
    +autorisationSortie: Boolean {Default=false}
    +dateDebut: Date {NotNull, Default=NOW}
    +dateFin: Date
    +estActif: Boolean {Default=true}
  }

  class ParentAdresse {
    +id: UUID {PK}
    +parentId: UUID {FK, NotNull}
    +adresseId: UUID {FK, NotNull}
    +estPrincipale: Boolean {Default=false}
    +typeAdresse: TypeAdresse {NotNull}
    +dateDebut: Date {Default=NOW}
    +dateFin: Date
  }

  ' H√©ritage
  Utilisateur <|-- AdminEcole
  Utilisateur <|-- Enseignant
  Utilisateur <|-- Eleve
  Utilisateur <|-- Parent
  Utilisateur <|-- Secretaire
  Utilisateur <|-- Comptable
  Utilisateur <|-- AgentTransport
  Utilisateur <|-- Bibliothecaire

  ' Relations Utilisateurs
  Tenant "1" *-- "0..*" Utilisateur : h√©berge >
  Eleve "1" -- "0..*" EleveParent : a pour parent >
  Parent "1" -- "0..*" EleveParent : est parent de >
  Eleve "0..*" -- "0..1" Adresse : habite √† >
  Parent "1" -- "1..*" ParentAdresse : a >
  ParentAdresse "0..*" -- "1" Adresse : r√©f√©rence >
}

' ========================================
' PACKAGE 4: STRUCTURE ACADEMIQUE
' ========================================
package "üéì Structure Acad√©mique" as AcademicPkg #E8F8F5 {

  class AnneeScolaire {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +libelle: String {NotNull, Pattern}
    +dateDebut: Date {NotNull}
    +dateFin: Date {NotNull}
    +estCourante: Boolean {Default=false}
    +statut: String {NotNull, Default='OUVERTE'}
    +dateCreation: DateTime {Default=NOW}
    +dateOuverture: DateTime
    +dateCloture: DateTime
    +cloturePar: UUID {FK}
    
    +activer(): void
    +cloturer(): void
    +verifierChevauchement(): Boolean
    +obtenirPeriodes(): List<Periode>
    +estActive(): Boolean
  }

  class Periode {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +anneeScolaireId: UUID {FK, NotNull}
    +nom: String {NotNull}
    +type: String {NotNull}
    +dateDebut: Date {NotNull}
    +dateFin: Date {NotNull}
    +ordreIndex: Integer {NotNull, Min=1}
    +estCloturee: Boolean {Default=false}
    +dateCloture: DateTime
    +cloturePar: UUID {FK}
    
    +contient(date: Date): Boolean
    +cloturer(): void
    +genererBulletins(): void
    +obtenirDureeJours(): Integer
  }

  class Niveau {
    +id: UUID {PK}
    +nom: String {NotNull, Unique}
    +code: String {NotNull, Unique}
    +typeEnseignement: TypeEnseignement {NotNull}
    +ordre: Integer {NotNull, Unique}
    +ageMin: Integer {Min=2}
    +ageMax: Integer {Max=25}
    +description: String
    +abreviation: String
  }

  class Salle {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +code: String {NotNull}
    +nom: String {NotNull}
    +capacite: Integer {NotNull, Min=1}
    +batiment: String
    +etage: Integer {Default=0}
    +superficie: Decimal
    +typeEquipement: String
    +equipements: JSON
    +estDisponible: Boolean {Default=true}
    
    +estDisponible(jour: String, heureDebut: Time, heureFin: Time): Boolean
    +reserver(cours: Cours, jour: String, heure: Time): void
    +liberer(): void
  }

  class Classe {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +nom: String {NotNull}
    +niveauId: UUID {FK, NotNull}
    +salleId: UUID {FK}
    +section: String
    +capacite: Integer {NotNull, Min=1, Max=50}
    +effectif: Integer {Default=0}
    +enseignantPrincipalId: UUID {FK}
    +anneeScolaireId: UUID {FK, NotNull}
    +estActive: Boolean {Default=true}
    
    +inscrireEleve(eleve: Eleve): Boolean
    +retirerEleve(eleve: Eleve): void
    +obtenirNombreEleves(): Integer
    +moyenneClasse(periode: Periode): Decimal
    +estComplete(): Boolean
    +obtenirEleves(): List<Eleve>
    +obtenirCours(): List<Cours>
  }

  class GroupeDiscipline {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +nom: String {NotNull}
    +code: String {NotNull}
    +description: String
    +ordreAffichage: Integer {NotNull}
    +couleur: String {Pattern(HEX)}
    +icone: String
    +estActif: Boolean {Default=true}
  }

  class Matiere {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +groupeDisciplineId: UUID {FK, NotNull}
    +nom: String {NotNull}
    +code: String {NotNull}
    +coefficient: Decimal {NotNull, Min=0.5, Max=10}
    +categorie: String
    +couleur: String {Pattern(HEX)}
    +description: String
    +abreviation: String
    +estObligatoire: Boolean {Default=true}
    
    +calculerNotePonderee(note: Decimal): Decimal
  }

  class Cours {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +classeId: UUID {FK, NotNull}
    +matiereId: UUID {FK, NotNull}
    +enseignantId: UUID {FK, NotNull}
    +anneeScolaireId: UUID {FK, NotNull}
    +libelle: String {NotNull}
    +description: String
    +volumeHoraire: Integer
    +volumeHoraireEffectue: Integer {Default=0}
    +objectifs: String
    +programme: String
    +estActif: Boolean {Default=true}
    
    +obtenirEleves(): List<Eleve>
    +obtenirEvaluations(): List<Evaluation>
    +calculerProgressionProgramme(): Decimal
  }

  class EmploiDuTemps {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +coursId: UUID {FK, NotNull}
    +jourSemaine: String {NotNull}
    +heureDebut: Time {NotNull}
    +heureFin: Time {NotNull}
    +salleId: UUID {FK}
    +recurrence: String {Default='HEBDOMADAIRE'}
    +dateDebut: Date
    +dateFin: Date
    +estActif: Boolean {Default=true}
    
    +verifierConflits(): Boolean
    +calculerDuree(): Integer
    +estAujourdui(): Boolean
  }

  ' Relations Acad√©miques
  Tenant "1" *-- "1..*" AnneeScolaire : organise >
  Tenant "1" *-- "0..*" Salle : poss√®de >
  Tenant "1" *-- "0..*" GroupeDiscipline : d√©finit >
  Tenant "1" *-- "0..*" Matiere : enseigne >
  
  AnneeScolaire "1" *-- "1..*" Periode : divis√©e en >
  AnneeScolaire "1" *-- "0..*" Classe : contient >
  
  Niveau "1" -- "0..*" Classe : niveau de >
  Niveau "0..*" -- "1" TypeEnseignement : appartient √† >
  
  Classe "0..*" -- "0..1" Salle : se d√©roule dans >
  Classe "1" -- "0..*" Eleve : inscrit >
  Classe "0..*" -- "0..1" Enseignant : dirig√©e par >
  
  GroupeDiscipline "1" -- "0..*" Matiere : regroupe >
  
  Cours "1" -- "1" Matiere : enseigne >
  Cours "1" -- "1" Classe : dans >
  Cours "1" -- "1" Enseignant : par >
  Cours "1" *-- "0..*" EmploiDuTemps : planifi√© >
  
  EmploiDuTemps "0..*" -- "0..1" Salle : dans >
}

' ========================================
' PACKAGE 5: EVALUATIONS & NOTES
' ========================================
package "üìù √âvaluations & Notes" as EvalPkg #FFF4E6 {

  class Evaluation {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +coursId: UUID {FK, NotNull}
    +periodeId: UUID {FK, NotNull}
    +type: String {NotNull}
    +titre: String {NotNull}
    +description: String
    +date: Date {NotNull}
    +duree: Integer
    +noteMaximale: Decimal {NotNull, Default=20}
    +poids: Decimal {NotNull, Default=1}
    +coefficient: Decimal {Default=1}
    +bareme: String
    +consignes: String
    +estPubliee: Boolean {Default=false}
    +datePublication: DateTime
    
    +estDansPeriode(): Boolean
    +publier(): void
    +calculerStatistiques(): Map
    +obtenirMoyenne(): Decimal
  }

  class Note {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +evaluationId: UUID {FK, NotNull}
    +eleveId: UUID {FK, NotNull}
    +valeur: Decimal {Min=0}
    +valeurSur20: Decimal
    +estAbsent: Boolean {Default=false}
    +commentaire: String {Size(0-500)}
    +appreciation: String
    +dateSaisie: DateTime {Default=NOW}
    +dateModification: DateTime
    +saisiePar: UUID {FK, NotNull}
    +modifiePar: UUID {FK}
    +estPubliee: Boolean {Default=false}
    +datePublication: DateTime
    
    +estValide(): Boolean
    +normaliser(noteMax: Decimal): Decimal
    +calculerPourcentage(): Decimal
  }

  class Bulletin {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +eleveId: UUID {FK, NotNull}
    +classeId: UUID {FK, NotNull}
    +anneeScolaireId: UUID {FK, NotNull}
    +periodeId: UUID {FK, NotNull}
    +moyenneGenerale: Decimal {Min=0, Max=20}
    +totalPoints: Decimal
    +totalCoefficients: Decimal
    +rang: Integer {Min=1}
    +effectifClasse: Integer
    +moyenneClasse: Decimal
    +moyennePremier: Decimal
    +moyenneDernier: Decimal
    +nombreAbsences: Integer {Default=0}
    +nombreRetards: Integer {Default=0}
    +nombreAbsencesJustifiees: Integer {Default=0}
    +heuresAbsence: Decimal {Default=0}
    +decision: String
    +mention: String
    +appreciationGenerale: String {Size(0-1000)}
    +appreciationChefEtablissement: String {Size(0-500)}
    +appreciationConseilClasse: String {Size(0-500)}
    +dateGeneration: DateTime {Default=NOW}
    +dateValidation: DateTime
    +datePublication: DateTime
    +estPublie: Boolean {Default=false}
    +estImprime: Boolean {Default=false}
    +urlPdf: String {URL}
    +generepar: UUID {FK}
    +validepar: UUID {FK}
    
    +calculerMoyenne(): Decimal
    +calculerRang(): Integer
    +genererPDF(): String
    +estAdmis(): Boolean
    +publier(): void
    +imprimer(): ByteArray
    +obtenirAppreciations(): List<AppreciationBulletin>
  }

  class AppreciationBulletin {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +bulletinId: UUID {FK, NotNull}
    +groupeDisciplineId: UUID {FK, NotNull}
    +moyenneGroupe: Decimal {Min=0, Max=20}
    +totalPointsGroupe: Decimal
    +totalCoefficientsGroupe: Decimal
    +rangGroupe: Integer
    +moyenneClasseGroupe: Decimal
    +appreciation: String {Size(0-500)}
    +appreciePar: UUID {FK}
    +dateAppreciation: DateTime {Default=NOW}
    
    +calculerMoyenneGroupe(): Decimal
    +calculerRangGroupe(): Integer
  }

  ' Relations √âvaluations
  Cours "1" o-- "0..*" Evaluation : contient >
  Periode "1" -- "0..*" Evaluation : dans >
  Evaluation "1" o-- "0..*" Note : √©value >
  Eleve "1" -- "0..*" Note : obtient >
  Enseignant "1" -- "0..*" Note : saisit >
  
  Eleve "1" -- "0..*" Bulletin : re√ßoit >
  Periode "1" -- "0..*" Bulletin : pour >
  Classe "1" -- "0..*" Bulletin : de >
  AnneeScolaire "1" -- "0..*" Bulletin : ann√©e >
  
  Bulletin "1" *-- "0..*" AppreciationBulletin : d√©taille >
  GroupeDiscipline "1" -- "0..*" AppreciationBulletin : appr√©cie >
  Enseignant "1" -- "0..*" AppreciationBulletin : r√©dige >
}

' ========================================
' PACKAGE 6: PRESENCES
' ========================================
package "‚úÖ Pr√©sences & Assiduit√©" as PresencePkg #E8F5E9 {

  class PresenceEleve {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +coursId: UUID {FK, NotNull}
    +eleveId: UUID {FK, NotNull}
    +date: Date {NotNull}
    +statut: String {NotNull}
    +motif: String
    +justifiee: Boolean {Default=false}
    +documentJustificatif: String {URL}
    +heureArrivee: Time
    +minutesRetard: Integer {Default=0}
    +pointePar: UUID {FK, NotNull}
    +datePointage: DateTime {Default=NOW}
    +validePar: UUID {FK}
    +dateValidation: DateTime
    +commentaire: String
    
    +estAbsent(): Boolean
    +estJustifiee(): Boolean
    +justifier(document: String): void
    +calculerRetard(): Integer
  }

  class PointageEnseignant {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +enseignantId: UUID {FK, NotNull}
    +date: Date {NotNull}
    +heureArrivee: Time {NotNull}
    +heureDepart: Time
    +statut: String {NotNull}
    +latitude: Double
    +longitude: Double
    +precision: Double
    +typeValidation: String {NotNull}
    +appareilId: String
    +adresseIP: String
    +commentaire: String
    
    +calculerDureePresence(): Duration
    +estDansPerimetre(rayonMetres: Integer): Boolean
    +calculerHeuresSupplementaires(): Decimal
  }

  class DemandePermission {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +utilisateurId: UUID {FK, NotNull}
    +type: String {NotNull}
    +dateDebut: Date {NotNull}
    +dateFin: Date {NotNull}
    +nombreJours: Integer
    +motif: String {NotNull, Size(10-1000)}
    +documentJustificatif: String {URL}
    +statut: String {NotNull, Default='EN_ATTENTE'}
    +dateCreation: DateTime {Default=NOW}
    +dateValidation: DateTime
    +validePar: UUID {FK}
    +commentaireValidation: String
    +priorite: String {Default='NORMALE'}
    
    +valider(): void
    +refuser(motif: String): void
    +annuler(): void
    +calculerJoursOuvrables(): Integer
  }

  ' Relations Pr√©sences
  Cours "1" o-- "0..*" PresenceEleve : enregistre >
  Eleve "1" -- "0..*" PresenceEleve : pr√©sence de >
  Enseignant "1" -- "0..*" PresenceEleve : pointe >
  
  Enseignant "1" -- "0..*" PointageEnseignant : pointe >
  
  Utilisateur "1" -- "0..*" DemandePermission : demande >
  AdminEcole "1" -- "0..*" DemandePermission : valide >
}

' ========================================
' PACKAGE 7: COMMUNICATION
' ========================================
package "üí¨ Communication & Notifications" as CommunicationPkg #F3E5F5 {

  class Conversation {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +titre: String {NotNull}
    +type: String {NotNull}
    +description: String
    +dateCreation: DateTime {Default=NOW}
    +dernierMessageDate: DateTime
    +nombreMessages: Integer {Default=0}
    +creePar: UUID {FK}
    +estArchivee: Boolean {Default=false}
    +estEpinglee: Boolean {Default=false}
    
    +ajouterParticipant(utilisateur: Utilisateur): void
    +retirerParticipant(utilisateur: Utilisateur): void
    +archiver(): void
    +epingler(): void
  }

  class ConversationParticipant {
    +id: UUID {PK}
    +conversationId: UUID {FK, NotNull}
    +utilisateurId: UUID {FK, NotNull}
    +dateAjout: DateTime {Default=NOW}
    +estAdmin: Boolean {Default=false}
    +derniereLecture: DateTime
    +messagesNonLus: Integer {Default=0}
  }

  class Message {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +conversationId: UUID {FK, NotNull}
    +expediteurId: UUID {FK, NotNull}
    +contenu: String {NotNull, Size(1-5000)}
    +typeContenu: String {Default='TEXTE'}
    +dateEnvoi: DateTime {NotNull, Default=NOW}
    +dateModification: DateTime
    +estLu: Boolean {Default=false}
    +dateLecture: DateTime
    +nombreLectures: Integer {Default=0}
    +pieceJointe: String {URL}
    +nomPieceJointe: String
    +taillePieceJointe: Integer
    +typeMime: String
    +estSupprime: Boolean {Default=false}
    +dateSuppression: DateTime
    
    +marquerLu(utilisateur: Utilisateur): void
    +modifier(nouveauContenu: String): void
    +supprimer(): void
  }

  class Annonce {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +titre: String {NotNull, Size(5-200)}
    +contenu: String {NotNull, Size(10-5000)}
    +cible: String {NotNull}
    +niveauxCibles: JSON
    +classesCibles: JSON
    +rolesDestinata ires: JSON
    +priorite: String {NotNull, Default='NORMALE'}
    +datePublication: DateTime
    +dateExpiration: DateTime
    +creePar: UUID {FK, NotNull}
    +dateCreation: DateTime {Default=NOW}
    +estPubliee: Boolean {Default=false}
    +estEpinglee: Boolean {Default=false}
    +pieceJointe: String {URL}
    +nombreVues: Integer {Default=0}
    
    +publier(): void
    +depublier(): void
    +estActive(): Boolean
    +obtenirDestinataires(): List<Utilisateur>
  }

  class AppareilFirebase {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +utilisateurId: UUID {FK, NotNull}
    +jetonFirebase: String {Unique, NotNull}
    +plateforme: String {NotNull}
    +modeleAppareil: String
    +fabricant: String
    +versionOS: String
    +versionApp: String
    +estActif: Boolean {Default=true}
    +dateEnregistrement: DateTime {Default=NOW}
    +derniereUtilisation: DateTime
    +derniereSynchronisation: DateTime
    
    +renouvelerJeton(nouveauJeton: String): void
    +desactiver(): void
    +synchroniser(): void
  }

  class Notification {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +utilisateurId: UUID {FK, NotNull}
    +type: String {NotNull}
    +titre: String {NotNull, Size(1-100)}
    +corps: String {NotNull, Size(1-500)}
    +donnees: JSON
    +urlAction: String
    +estLue: Boolean {Default=false}
    +dateCreation: DateTime {NotNull, Default=NOW}
    +dateLecture: DateTime
    +estEnvoyee: Boolean {Default=false}
    +dateEnvoi: DateTime
    +estCliquee: Boolean {Default=false}
    +dateCliOk: DateTime
    +priorite: String {Default='NORMALE'}
    
    +marquerCommeLue(): void
    +envoyer(): void
    +marquerCliquee(): void
  }

  ' Relations Communication
  Conversation "1" *-- "0..*" Message : contient >
  Conversation "1" *-- "2..*" ConversationParticipant : inclut >
  ConversationParticipant "0..*" -- "1" Utilisateur : participe >
  Utilisateur "1" -- "0..*" Message : envoie >
  
  Tenant "1" *-- "0..*" Annonce : diffuse >
  Utilisateur "1" -- "0..*" Annonce : cr√©e >
  
  Utilisateur "1" -- "0..*" AppareilFirebase : poss√®de >
  Utilisateur "1" -- "0..*" Notification : re√ßoit >
}

' ========================================
' PACKAGE 8: FINANCE
' ========================================
package "üí∞ Finance & Comptabilit√©" as FinancePkg #FFF3E0 {

  class Frais {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +nom: String {NotNull, Size(3-200)}
    +description: String
    +montant: Decimal {NotNull, Min=0}
    +devise: String {NotNull, Default='XAF'}
    +frequence: String {NotNull}
    +estObligatoire: Boolean {Default=true}
    +typeFrais: String {NotNull}
    +categorieComptable: String
    +niveauId: UUID {FK}
    +anneeScolaireId: UUID {FK, NotNull}
    +dateDebut: Date {NotNull}
    +dateFin: Date
    +dateEcheance: Date
    +estActif: Boolean {Default=true}
    
    +estApplicable(eleve: Eleve): Boolean
    +calculerMontantProrate(dateInscription: Date): Decimal
  }

  class FraisEleve {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +eleveId: UUID {FK, NotNull}
    +fraisId: UUID {FK, NotNull}
    +montantInitial: Decimal {NotNull}
    +montant: Decimal {NotNull}
    +montantPaye: Decimal {Default=0}
    +montantRestant: Decimal
    +montantRemise: Decimal {Default=0}
    +pourcentageRemise: Decimal {Default=0}
    +motifRemise: String
    +dateEcheance: Date {NotNull}
    +statut: String {NotNull, Default='IMPAYE'}
    +anneeScolaireId: UUID {FK, NotNull}
    +periodeId: UUID {FK}
    +dateCreation: DateTime {Default=NOW}
    +dernierRappel: DateTime
    +nombreRappels: Integer {Default=0}
    
    +calculerSolde(): Decimal
    +estSoldee(): Boolean
    +appliquerRemise(montant: Decimal, motif: String): void
    +estEnRetard(): Boolean
    +genererEcheancier(): List<Echeance>
  }

  class Transaction {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +fraisEleveId: UUID {FK, NotNull}
    +montant: Decimal {NotNull, Min=0}
    +montantAvantTransaction: Decimal
    +montantApresTransaction: Decimal
    +methodePaiement: String {NotNull}
    +numeroReference: String {Unique, NotNull}
    +numeroRecu: String {Unique}
    +dateTransaction: DateTime {NotNull, Default=NOW}
    +dateComptabilisation: DateTime
    +statut: String {NotNull, Default='EN_ATTENTE'}
    +recuPar: UUID {FK, NotNull}
    +validePar: UUID {FK}
    +dateValidation: DateTime
    +commentaire: String
    +pieceJustificative: String {URL}
    
    +genererRecu(): Recu
    +valider(): void
    +annuler(motif: String): void
    +comptabiliser(): void
  }

  class Recu {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +transactionId: UUID {FK, NotNull}
    +numeroRecu: String {Unique, NotNull}
    +montant: Decimal {NotNull}
    +montantEnLettres: String {NotNull}
    +dateEmission: DateTime {NotNull, Default=NOW}
    +emetPar: UUID {FK, NotNull}
    +eleveNom: String {NotNull}
    +eleveMatricule: String
    +motif: String {NotNull}
    +urlPdf: String {URL}
    +estAnnule: Boolean {Default=false}
    +dateAnnulation: DateTime
    +motifAnnulation: String
    +estImprime: Boolean {Default=false}
    +dateImpression: DateTime
    
    +genererPDF(): String
    +imprimer(): ByteArray
    +annuler(motif: String): void
    +envoyer(email: String): void
  }

  ' Relations Finance
  Tenant "1" *-- "0..*" Frais : d√©finit >
  Niveau "0..*" -- "0..1" Frais : pour >
  AnneeScolaire "1" -- "0..*" Frais : ann√©e >
  
  Eleve "1" -- "0..*" FraisEleve : doit >
  Frais "1" -- "0..*" FraisEleve : appliqu√© √† >
  
  FraisEleve "1" o-- "0..*" Transaction : pay√© par >
  Utilisateur "1" -- "0..*" Transaction : re√ßoit >
  
  Transaction "1" -- "1" Recu : g√©n√®re >
}

' ========================================
' PACKAGE 9: TRANSPORT
' ========================================
package "üöå Transport Scolaire" as TransportPkg #E1F5FE {

  class Bus {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +numeroPlaques: String {Unique, NotNull}
    +marque: String {NotNull}
    +modele: String
    +capacite: Integer {NotNull, Min=5, Max=70}
    +anneeFabrication: Integer
    +couleur: String
    +numeroChassisVIN: String {Unique}
    +chauffeurId: UUID {FK}
    +telephoneChauffeur: String {Phone}
    +statut: String {NotNull, Default='OPERATIONNEL'}
    +dateAssurance: Date {NotNull, Future}
    +compagnieAssurance: String
    +numeroPolice: String
    +dateVisite: Date {NotNull, Future}
    +kmParcourus: Integer {Default=0}
    +dateAcquisition: Date
    +dateProchaineMaintenance: Date
    +coutAcquisition: Decimal
    
    +estDisponible(): Boolean
    +estEnRegle(): Boolean
    +programmerMaintenance(date: Date): void
    +calculerAge(): Integer
  }

  class Trajet {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +busId: UUID {FK, NotNull}
    +nom: String {NotNull}
    +description: String
    +heureDepart: Time {NotNull}
    +heureArrivee: Time {NotNull}
    +type: String {NotNull}
    +joursSemaine: JSON {NotNull}
    +estActif: Boolean {Default=true}
    +distanceKm: Decimal
    +dureeEstimee: Integer
    +capaciteMax: Integer
    +nombreInscrits: Integer {Default=0}
    
    +calculerDuree(): Integer
    +obtenirProchainArret(heureActuelle: Time): ArretBus
    +estComplet(): Boolean
    +estAujourdui(): Boolean
  }

  class ArretBus {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +trajetId: UUID {FK, NotNull}
    +nom: String {NotNull}
    +adresse: String
    +quartier: String
    +latitude: Double {NotNull}
    +longitude: Double {NotNull}
    +ordrePassage: Integer {NotNull, Min=1}
    +heurePassage: Time {NotNull}
    +dureeArret: Integer {Default=2}
    +pointRepere: String
    
    +calculerDistance(autre: ArretBus): Decimal
    +estProche(lat: Double, lon: Double, rayonMetres: Integer): Boolean
  }

  class TrajetEleve {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +eleveId: UUID {FK, NotNull}
    +trajetId: UUID {FK, NotNull}
    +arretBusId: UUID {FK, NotNull}
    +montantMensuel: Decimal {NotNull, Min=0}
    +dateDebut: Date {NotNull}
    +dateFin: Date
    +estActif: Boolean {Default=true}
    +estPaye: Boolean {Default=false}
    +dateActivation: DateTime
    +dateDesactivation: DateTime
    
    +activer(): void
    +desactiver(): void
    +verifierPaiement(): Boolean
  }

  class PresenceTransport {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +eleveId: UUID {FK, NotNull}
    +trajetId: UUID {FK, NotNull}
    +date: Date {NotNull}
    +statut: String {NotNull}
    +direction: String {NotNull}
    +heurePointage: Time {NotNull}
    +arretBusId: UUID {FK, NotNull}
    +pointePar: UUID {FK, NotNull}
    +latitude: Double
    +longitude: Double
    +commentaire: String
    +parentNotifie: Boolean {Default=false}
    +dateNotification: DateTime
    
    +estPresent(): Boolean
    +notifierParent(): void
  }

  class PositionBus {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +busId: UUID {FK, NotNull}
    +trajetId: UUID {FK}
    +latitude: Double {NotNull}
    +longitude: Double {NotNull}
    +vitesse: Double {Min=0}
    +cap: Double {Min=0, Max=360}
    +altitude: Double
    +precision: Double
    +dateHeure: DateTime {NotNull, Default=NOW}
    +prochainArretId: UUID {FK}
    +distanceProchainArret: Decimal
    +tempEstimeArrivee: Integer
    +estEnCours: Boolean {Default=true}
    
    +estDansZone(arret: ArretBus, rayonMetres: Integer): Boolean
    +calculerDistance(lat: Double, lon: Double): Decimal
    +estimerArrivee(arret: ArretBus): DateTime
    +calculerVitesseMoyenne(): Decimal
  }

  ' Relations Transport
  Tenant "1" *-- "0..*" Bus : poss√®de >
  AgentTransport "0..*" -- "0..1" Bus : conduit >
  
  Bus "1" -- "0..*" Trajet : effectue >
  Trajet "1" *-- "2..*" ArretBus : dessert >
  
  Eleve "1" -- "0..*" TrajetEleve : inscrit √† >
  Trajet "1" -- "0..*" TrajetEleve : transporte >
  ArretBus "1" -- "0..*" TrajetEleve : monte √† >
  
  Eleve "1" -- "0..*" PresenceTransport : pr√©sent >
  Trajet "1" -- "0..*" PresenceTransport : enregistre >
  AgentTransport "1" -- "0..*" PresenceTransport : pointe >
  
  Bus "1" -- "0..*" PositionBus : localise >
  Trajet "0..*" -- "0..1" PositionBus : en cours >
}

' ========================================
' PACKAGE 10: BIBLIOTHEQUE
' ========================================
package "üìö Biblioth√®que" as LibraryPkg #FCE4EC {

  class Livre {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +titre: String {NotNull, Size(1-500)}
    +auteur: String {NotNull}
    +isbn: String {Unique}
    +editeur: String
    +annePublication: Integer
    +categorie: String {NotNull}
    +sousCategorie: String
    +nombreExemplaires: Integer {NotNull, Min=1}
    +exemplairesDisponibles: Integer {NotNull}
    +exemplairesEmpruntes: Integer {Default=0}
    +emplacement: String
    +etagere: String
    +rayonnage: String
    +langue: String {Default='Fran√ßais'}
    +nombrePages: Integer
    +resume: String {Size(0-2000)}
    +imageCouverte: String {URL}
    +prixAchat: Decimal
    +dateAcquisition: Date
    +estActif: Boolean {Default=true}
    
    +estDisponible(): Boolean
    +reserver(): void
    +incrementerExemplaires(nombre: Integer): void
    +decrementerExemplaires(nombre: Integer): void
  }

  class PretLivre {
    +id: UUID {PK}
    +tenantId: UUID {FK, NotNull, Index}
    +livreId: UUID {FK, NotNull}
    +eleveId: UUID {FK, NotNull}
    +datePret: Date {NotNull, Default=TODAY}
    +dateRetourPrevue: Date {NotNull}
    +dateRetourEffective: Date
    +dureePret: Integer
    +statut: String {NotNull, Default='EN_COURS'}
    +pretePar: UUID {FK, NotNull}
    +receptionnePar: UUID {FK}
    +dateReception: DateTime
    +montantCaution: Decimal {Default=0}
    +montantAmende: Decimal {Default=0}
    +joursRetard: Integer {Default=0}
    +etatLivreDepart: String {Default='BON'}
    +etatLivreRetour: String
    +commentaire: String
    +aEteRelance: Boolean {Default=false}
    +dateRelance: DateTime
    
    +estEnRetard(): Boolean
    +calculerAmende(): Decimal
    +retourner(): void
    +renouveler(nouveaueDateRetour: Date): void
    +declarer Perdu(): void
  }

  ' Relations Biblioth√®que
  Tenant "1" *-- "0..*" Livre : poss√®de >
  Livre "1" -- "0..*" PretLivre : pr√™t√© via >
  Eleve "1" -- "0..*" PretLivre : emprunte >
  Bibliothecaire "1" -- "0..*" PretLivre : g√®re >
}

' ========================================
' NOTES ARCHITECTURALES
' ========================================
note as N1
  <b>ARCHITECTURE MULTI-TENANT</b>
  
  ‚Ä¢ Isolation stricte : tenantId sur toutes les entit√©s
  ‚Ä¢ Row-Level Security (RLS) en base de donn√©es
  ‚Ä¢ Index composites : (tenantId, autreColonne)
  ‚Ä¢ Pas de partage de donn√©es entre tenants
  
  <b>S√âCURIT√â</b>
  
  ‚Ä¢ Mots de passe : bcrypt (cost=12)
  ‚Ä¢ Donn√©es m√©dicales : chiffrement AES-256
  ‚Ä¢ Tokens JWT : RS256, expiration 24h
  ‚Ä¢ HTTPS obligatoire (TLS 1.3)
end note

note as N2
  <b>NORMALISATION</b>
  
  ‚úÖ Forme Normale 3NF respect√©e
  ‚úÖ Pas de redondances
  ‚úÖ Cl√©s √©trang√®res avec CASCADE
  ‚úÖ Contraintes CHECK actives
  
  <b>PERFORMANCE</b>
  
  ‚Ä¢ Index sur FK et colonnes fr√©quemment filtr√©es
  ‚Ä¢ Pagination obligatoire (max 100/page)
  ‚Ä¢ Cache Redis pour sessions
  ‚Ä¢ CDN pour fichiers statiques
end note

note as N3
  <b>BONNES PRATIQUES UML</b>
  
  ‚Ä¢ Multiplicit√©s pr√©cises
  ‚Ä¢ Relations bidirectionnelles document√©es
  ‚Ä¢ Enums pour donn√©es fixes
  ‚Ä¢ Value Objects pour r√©utilisabilit√©
  ‚Ä¢ Contraintes en annotations {NotNull}, {Unique}
  
  <b>PATTERNS APPLIQU√âS</b>
  
  ‚Ä¢ Repository Pattern
  ‚Ä¢ Factory Pattern (g√©n√©ration documents)
  ‚Ä¢ Strategy Pattern (m√©thodes paiement)
  ‚Ä¢ Observer Pattern (notifications)
end note

@enduml
